/* Claude Code 博客文章代码块样式优化 - 深色主题 */
/* 使用高优先级选择器强制覆盖所有默认样式 */

/* 强制覆盖代码块的整体外观 - 深色风格 */
/* 最高优先级选择器 - 覆盖所有可能的代码块样式 */
html body .markdown-body .highlight pre,
html body .markdown-body .highlight,
html body .markdown-body pre,
html body div.highlight,
html body div.highlight pre,
html body .highlight,
html body .highlight pre,
html body pre {
    background-color: #1e1e1e !important;
    background: #1e1e1e !important;
    border: 1px solid #333 !important;
    border-radius: 8px !important;
    padding: 16px !important;
    overflow: auto !important;
    overflow-x: auto !important;
    font-size: 14px !important;
    line-height: 1.5 !important;
    font-family: 'JetBrains Mono', 'Fira Code', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3) !important;
    color: #d4d4d4 !important;
}

/* 确保所有代码元素都使用深色主题 - 最高优先级 */
body .markdown-body .highlight pre code,
body .markdown-body pre code,
body .highlight pre code,
body pre code,
html body .highlight pre code,
html body pre code {
    background-color: transparent !important;
    background: transparent !important;
    color: #d4d4d4 !important;
    border: none !important;
    padding: 0 !important;
    font-family: 'JetBrains Mono', 'Fira Code', 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace !important;
}

/* 改进行内代码的样式 - 深色风格 */
body .markdown-body code:not(.hljs),
body .markdown-body code,
body .markdown-body tt {
    background-color: rgba(45, 45, 45, 0.8) !important;
    padding: 2px 6px !important;
    border-radius: 4px !important;
    font-size: 85% !important;
    border: none !important;
    color: #f92672 !important;
    font-family: 'JetBrains Mono', 'Fira Code', monospace !important;
}

/* 特别处理代码块内的代码元素 - 确保透明背景 */
body .markdown-body .highlight code,
body .markdown-body .highlight pre code,
body .markdown-body pre code {
    background-color: transparent !important;
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
    color: #d4d4d4 !important;
}

/* VS Code 风格的深色语法高亮 */
.markdown-body .highlight,
.markdown-body pre {
    position: relative;
}

/* 复制按钮样式 */
.markdown-body .highlight::after {
    content: "复制";
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(255, 255, 255, 0.1);
    color: #d4d4d4;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.markdown-body .highlight:hover::after {
    opacity: 1;
}

/* 语言标签 - 不显示，保持简洁 */
.markdown-body .highlight::before {
    display: none;
}

/* VS Code Dark+ 主题语法高亮颜色 */

/* 注释 - 绿色 */
.markdown-body .highlight .c,
.markdown-body .highlight .c1,
.markdown-body .highlight .cm,
.markdown-body .highlight .cp {
    color: #6A9955 !important;
    font-style: italic;
}

/* 字符串 - 橙色 */
.markdown-body .highlight .s,
.markdown-body .highlight .s1,
.markdown-body .highlight .s2,
.markdown-body .highlight .se,
.markdown-body .highlight .sh,
.markdown-body .highlight .si {
    color: #CE9178 !important;
}

/* 关键字 - 蓝色 */
.markdown-body .highlight .k,
.markdown-body .highlight .kd,
.markdown-body .highlight .kn,
.markdown-body .highlight .kr,
.markdown-body .highlight .kt {
    color: #569CD6 !important;
    font-weight: normal;
}

/* 数字 - 浅绿色 */
.markdown-body .highlight .m,
.markdown-body .highlight .mf,
.markdown-body .highlight .mh,
.markdown-body .highlight .mi,
.markdown-body .highlight .mo {
    color: #B5CEA8 !important;
}

/* 变量名 - 浅蓝色 */
.markdown-body .highlight .n,
.markdown-body .highlight .na,
.markdown-body .highlight .nb,
.markdown-body .highlight .nc,
.markdown-body .highlight .nd,
.markdown-body .highlight .ne,
.markdown-body .highlight .nf,
.markdown-body .highlight .ni,
.markdown-body .highlight .nl,
.markdown-body .highlight .nn,
.markdown-body .highlight .no,
.markdown-body .highlight .nt,
.markdown-body .highlight .nv,
.markdown-body .highlight .nx {
    color: #9CDCFE !important;
}

/* 函数名 - 黄色 */
.markdown-body .highlight .nf {
    color: #DCDCAA !important;
}

/* 操作符 - 白色 */
.markdown-body .highlight .o,
.markdown-body .highlight .ow {
    color: #d4d4d4 !important;
}

/* 括号等 - 白色 */
.markdown-body .highlight .p {
    color: #d4d4d4 !important;
}

/* Bash 特定高亮 */
.markdown-body .highlight .gp {
    color: #4EC9B0 !important;  /* 青色提示符 */
    font-weight: bold;
}

/* 命令 */
.markdown-body .highlight .nb {
    color: #569CD6 !important;  /* 蓝色命令 */
}

/* 滚动条样式 - 深色风格 */
.markdown-body .highlight pre::-webkit-scrollbar,
.markdown-body pre::-webkit-scrollbar {
    height: 8px;
    width: 8px;
}

.markdown-body .highlight pre::-webkit-scrollbar-track,
.markdown-body pre::-webkit-scrollbar-track {
    background: #2d2d2d;
    border-radius: 4px;
}

.markdown-body .highlight pre::-webkit-scrollbar-thumb,
.markdown-body pre::-webkit-scrollbar-thumb {
    background: #555;
    border-radius: 4px;
}

.markdown-body .highlight pre::-webkit-scrollbar-thumb:hover,
.markdown-body pre::-webkit-scrollbar-thumb:hover {
    background: #666;
}

/* 响应式设计 - 移动设备上的代码块 */
@media (max-width: 768px) {
    .markdown-body .highlight pre,
    .markdown-body pre {
        padding: 12px;
        font-size: 13px;
        border-radius: 6px;
        line-height: 1.4;
    }
    
    .markdown-body .highlight::after {
        top: 6px;
        right: 6px;
        padding: 3px 6px;
        font-size: 11px;
    }
}

/* 代码行高亮效果 (可选) */
.markdown-body .highlight pre code {
    display: block;
    width: 100%;
}

/* 确保代码块内容不会溢出 */
.markdown-body .highlight pre,
.markdown-body pre {
    max-width: 100%;
    overflow-x: auto;
    white-space: pre;
}

/* 特殊字符的处理 */
.markdown-body .highlight .err {
    color: #f92672 !important;
    background-color: transparent !important;
}

/* 确保代码块在文章中的间距 */
.markdown-body .highlight {
    margin: 16px 0;
}

/* 打印样式 - 如果需要打印友好 */
@media print {
    .markdown-body .highlight pre,
    .markdown-body pre {
        background-color: #f8f9fa !important;
        color: #333 !important;
        border: 1px solid #ddd;
        box-shadow: none;
    }
    
    .markdown-body .highlight::after {
        display: none;
    }
}